FROM eclipse-temurin:17-jre

# Download Aeron
ARG AERON_VERSION=1.44.1
RUN apt-get update && apt-get install -y curl && \
    curl -L -o /opt/aeron-all.jar \
    https://repo1.maven.org/maven2/io/aeron/aeron-all/${AERON_VERSION}/aeron-all-${AERON_VERSION}.jar && \
    apt-get clean && rm -rf /var/lib/apt/lists/*

# Copy entrypoint script
COPY scripts/aeron-entrypoint.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh

ENTRYPOINT ["/entrypoint.sh"]
